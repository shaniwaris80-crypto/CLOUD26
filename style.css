:root{
  --bg:#0b0b0b;
  --panel:#101010;
  --card:#ffffff;
  --ink:#0a0a0a;
  --muted:#666;
  --line:#e8e8e8;
  --shadow:0 10px 30px rgba(0,0,0,.18);
  --radius:18px;
  --radius2:14px;
  --pad:16px;
  --pad2:12px;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--sans);
  background:linear-gradient(180deg,#050505,#0b0b0b);
  color:#fff;
}

.app{min-height:100%; display:flex; flex-direction:column}

.topbar{
  display:flex; justify-content:space-between; align-items:center;
  padding:14px 16px;
  border-bottom:1px solid rgba(255,255,255,.08);
  position:sticky; top:0;
  background:rgba(0,0,0,.6);
  backdrop-filter: blur(12px);
  z-index:50;
}

.brand{display:flex; align-items:center; gap:12px}
.logo{
  width:42px; height:42px; border-radius:14px;
  background:#fff; color:#000; display:grid; place-items:center;
  font-weight:900; letter-spacing:.5px;
}
.brandTitle{font-weight:900; letter-spacing:.6px}
.brandSub{font-size:12px; color:rgba(255,255,255,.68); margin-top:2px}

.topbarRight{display:flex; align-items:center; gap:10px}

.cloudLamp{
  display:flex; align-items:center; gap:8px;
  padding:6px 10px; border:1px solid rgba(255,255,255,.18);
  border-radius:999px; font-size:12px;
  background:rgba(255,255,255,.06);
}
.cloudLamp .dot{
  width:10px; height:10px; border-radius:50%;
  background:#777;
  box-shadow: 0 0 0 3px rgba(255,255,255,.08) inset;
}
.cloudLamp.green .dot{background:#24d266}
.cloudLamp.yellow .dot{background:#f6c343}
.cloudLamp.red .dot{background:#ff4d4d}
.cloudLamp .txt{font-family:var(--mono); color:#fff; opacity:.85}

.tabs{
  display:flex; gap:8px; padding:10px 12px;
  overflow:auto; border-bottom:1px solid rgba(255,255,255,.08);
}
.tab{
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.06);
  color:#fff;
  padding:10px 12px;
  border-radius:999px;
  cursor:pointer;
  white-space:nowrap;
  font-weight:700;
}
.tab.active{
  background:#fff; color:#000;
  border-color:#fff;
}
.tab.lock{font-weight:900}

.main{padding:14px; flex:1}
.panel{display:none}
.panel.active{display:block}

.card{
  background:#fff; color:#000;
  border-radius:var(--radius);
  padding:var(--pad);
  box-shadow:var(--shadow);
  border:1px solid #f1f1f1;
}
.subcard{
  background:#fff;
  border:1px solid var(--line);
  border-radius:var(--radius2);
  padding:var(--pad2);
}
.subcard h3{margin:0 0 8px 0}
h2{margin:0 0 12px 0}
h3{font-size:14px; letter-spacing:.2px}
hr.sep{border:0; height:1px; background:var(--line); margin:14px 0}

.row{display:flex}
.center{align-items:center}
.between{justify-content:space-between}
.wrap{flex-wrap:wrap}
.gap{gap:10px}
.grow{flex:1}

.field{display:flex; flex-direction:column; gap:6px; min-width:160px}
.field label{font-size:12px; color:#333; font-weight:800}
.field input, .field select, textarea{
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px 12px;
  font-size:14px;
  outline:none;
  background:#fff;
}
textarea{resize:vertical}
.field input:focus, .field select:focus, textarea:focus{
  border-color:#000;
  box-shadow:0 0 0 3px rgba(0,0,0,.08);
}

.btn{
  border:1px solid #000;
  background:#fff;
  color:#000;
  padding:10px 12px;
  border-radius:12px;
  font-weight:900;
  cursor:pointer;
}
.btn:hover{transform: translateY(-1px)}
.btn:active{transform: translateY(0)}
.btn.primary{background:#000;color:#fff}
.btn.success{background:#33d06a;color:#000;border-color:#33d06a}
.btn.danger{background:#ff4d4d;color:#000;border-color:#ff4d4d}

.hint{font-size:12px; color:#444; margin-top:6px}
.warn{font-size:12px; color:#b30000; margin-top:8px}

.grid2{display:grid; grid-template-columns: 1.4fr .8fr; gap:14px}
.grid3{display:grid; grid-template-columns: repeat(3,1fr); gap:14px}

.cardTitleRow{display:flex; justify-content:space-between; align-items:flex-start; gap:12px}
.pillRow{display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end}
.pill{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius:999px;
  background:#000; color:#fff; font-weight:900; font-size:12px;
}

.tableWrap{overflow:auto; border:1px solid var(--line); border-radius:14px}
table.grid{width:100%; border-collapse:collapse; min-width:980px; background:#fff}
table.grid th, table.grid td{
  border-bottom:1px solid var(--line);
  padding:8px 8px;
  text-align:left;
  font-size:12px;
}
table.grid th{position:sticky; top:0; background:#fafafa; z-index:5}
table.grid td .mini{width:100%; min-width:80px}
table.grid td select, table.grid td input{
  width:100%;
  border:1px solid #eaeaea;
  border-radius:10px;
  padding:8px 10px;
  font-size:12px;
}
.tableDel{
  width:36px; height:36px;
  border-radius:12px;
  background:#ff4d4d;
  border:1px solid #ff4d4d;
  cursor:pointer;
  font-weight:900;
}

.totals{display:flex; flex-direction:column; gap:8px; margin-top:10px}
.totals > div{display:flex; justify-content:space-between; align-items:center}
.totals .grand{padding-top:8px; border-top:1px dashed #ddd}
.totals b{font-family:var(--mono)}

.payList{margin-top:10px; display:flex; flex-direction:column; gap:8px}
.payItem{
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px;
  display:flex; justify-content:space-between; gap:10px;
}
.payItem .left{display:flex; flex-direction:column; gap:2px}
.payItem .right{display:flex; align-items:center; gap:8px}
.payItem .x{
  width:36px; height:36px; border-radius:12px;
  border:1px solid #000; background:#fff; font-weight:900; cursor:pointer;
}

.list{display:flex; flex-direction:column; gap:10px; margin-top:12px}
.listItem{
  border:1px solid var(--line);
  border-radius:14px;
  padding:12px;
  display:flex; justify-content:space-between; align-items:flex-start; gap:12px;
}
.listItem .meta{display:flex; flex-direction:column; gap:4px}
.listItem .meta .title{font-weight:900}
.listItem .meta .sub{font-size:12px; color:#444}
.listItem .actions{display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end}

.kpis{display:grid; grid-template-columns: repeat(4,1fr); gap:10px; margin:12px 0}
.kpi{
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px;
  background:#fff;
}
.kpi .k{font-size:12px; color:#444; font-weight:900}
.kpi .v{font-family:var(--mono); font-size:18px; font-weight:900}

.qrBox{display:flex; gap:14px; align-items:flex-start; margin-top:10px}
.qrSide{flex:1; display:flex; flex-direction:column; gap:8px}
.qrSide label{font-size:12px; font-weight:900}
#qrCanvas{border:1px solid var(--line); border-radius:14px; background:#fff}

.priceHints{display:flex; flex-direction:column; gap:8px; margin-top:10px}
.priceHint{
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px;
  display:flex; justify-content:space-between; gap:10px;
  font-family:var(--mono);
  font-size:12px;
}

.modal{position:fixed; inset:0; display:grid; place-items:center; z-index:99}
.modal.hidden{display:none}
.modalBackdrop{position:absolute; inset:0; background:rgba(0,0,0,.55)}
.modalCard{
  position:relative;
  width:min(1100px,calc(100vw - 22px));
  height:min(86vh,820px);
  background:#fff;
  color:#000;
  border-radius:18px;
  overflow:hidden;
  box-shadow: var(--shadow);
  border:1px solid rgba(255,255,255,.3);
  display:flex;
  flex-direction:column;
}
.modalTop{
  padding:12px;
  border-bottom:1px solid var(--line);
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}
.modalTitle{font-weight:900}
.modalBody{padding:12px; overflow:auto}
.pdfFrame{flex:1; width:100%; border:0}

.gate{
  display:none;
  padding:18px;
}
.gate.show{display:block}
.gateCard{max-width:720px; margin:20px auto}
.gateCard h2{margin:0 0 6px 0}
.gateCard p{margin:0 0 12px 0; color:#222}
.lockBox{display:flex; gap:10px; align-items:flex-end; flex-wrap:wrap}
.lockContent.hidden{display:none}

/* Responsive */
@media (max-width: 980px){
  .grid2{grid-template-columns: 1fr}
  table.grid{min-width: 980px}
  .qrBox{flex-direction:column}
}
@media (max-width: 640px){
  .kpis{grid-template-columns: repeat(2,1fr)}
  .tabs{padding:10px 10px}
  .tab{padding:10px 11px}
}
